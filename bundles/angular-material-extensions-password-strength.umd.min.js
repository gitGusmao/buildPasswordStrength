!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("@angular/animations"),require("@angular/common"),require("@angular/material/progress-bar"),require("@angular/material/core"),require("@angular/material/card"),require("@angular/material/icon")):"function"==typeof define&&define.amd?define("@angular-material-extensions/password-strength",["exports","@angular/core","@angular/forms","@angular/animations","@angular/common","@angular/material/progress-bar","@angular/material/core","@angular/material/card","@angular/material/icon"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self)["angular-material-extensions"]=t["angular-material-extensions"]||{},t["angular-material-extensions"]["password-strength"]={}),t.ng.core,t.ng.forms,t.ng.animations,t.ng.common,t.ng.material.progressBar,t.ng.material.core,t.ng.material.card,t.ng.material.icon)}(this,(function(t,e,r,a,n,s,i,o,p){"use strict";var l,c;(l=t.Colors||(t.Colors={})).primary="primary",l.accent="accent",l.warn="warn",(c=t.Criteria||(t.Criteria={})).at_least_eight_chars="minChar",c.at_least_one_lower_case_char="lowerCase",c.at_least_one_upper_case_char="upperCase",c.at_least_one_digit_char="digit",c.at_least_one_special_char=" specialChar",c.at_custom_chars="customChars";var h=function(){function t(){this._type="text"}return Object.defineProperty(t.prototype,"type",{get:function(){return this.isVisible?"text":"password"},enumerable:!1,configurable:!0}),t}();h.decorators=[{type:e.Component,args:[{selector:"mat-pass-toggle-visibility",template:'<button (click)="isVisible = !isVisible"\r\n        class="mat-icon-button cdk-focused cdk-mouse-focused"\r\n        mat-icon-button matRipple\r\n        matRippleCentered="true"\r\n        type="button">\r\n  <mat-icon>{{isVisible ? \'visibility\' : \'visibility_off\' }}</mat-icon>\r\n</button>\r\n\r\n',encapsulation:e.ViewEncapsulation.None,styles:[""]}]}],h.propDecorators={isVisible:[{type:e.Input}]};Object.create;function m(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var a,n,s=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(a=s.next()).done;)i.push(a.value)}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(m(arguments[e]));return t}Object.create;var u=function(){function t(){}return t.prototype.isUndefinedOrEmpty=function(t){t&&t.value&&t.value.length},t.prototype.validate=function(t,e){var r=this;return function(a){if(r.isUndefinedOrEmpty(a),!e.test(a.value)){var n={};return n[t]={actualValue:a.value,requiredPattern:e},n}}},t.prototype.confirm=function(t){var e=this;return function(r){if(e.isUndefinedOrEmpty(r),r.value!==t)return{notConfirmed:{password:t,passwordConfirmation:r.value}}}},t}(),d={lowerCase:RegExp(/^(?=.*?[a-z])/),upperCase:RegExp(/^(?=.*?[A-Z])/),digit:RegExp(/^(?=.*?[0-9])/),specialChar:RegExp(/^(?=.*?[" !"#$%&'()*+,-./:;<=>?@[\]^_`{|}~"])/)},f=function(){function a(){this.enableLengthRule=!0,this.enableLowerCaseLetterRule=!0,this.enableUpperCaseLetterRule=!0,this.enableDigitRule=!0,this.enableSpecialCharRule=!0,this.min=8,this.max=30,this.warnThreshold=21,this.accentThreshold=81,this.onStrengthChanged=new e.EventEmitter,this.criteriaMap=new Map,this.passwordFormControl=new r.FormControl,this.passwordConfirmationFormControl=new r.FormControl,this.validatorsArray=[],this.matPasswordStrengthValidator=new u,this._strength=0,this.propagateChange=function(t){}}return Object.defineProperty(a.prototype,"strength",{get:function(){return this._strength?this._strength:0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"color",{get:function(){return this._strength<this.warnThreshold?t.Colors.warn:this._strength<this.accentThreshold?t.Colors.accent:t.Colors.primary},enumerable:!1,configurable:!0}),a.prototype.ngOnInit=function(){this.setRulesAndValidators()},a.prototype.ngOnChanges=function(e){e.externalError&&e.externalError.firstChange||e.password.isFirstChange()||(e.externalError&&e.externalError.currentValue?this._color=t.Colors.warn:this.pass&&this.pass.length>0?this.calculatePasswordStrength():this.reset())},a.prototype.parseCustomValidatorsRegex=function(t){return void 0===t&&(t=this.customValidator),this.customValidator instanceof RegExp?this.customValidator:"string"==typeof this.customValidator?RegExp(this.customValidator):void 0},a.prototype.setRulesAndValidators=function(){var e=this;this.validatorsArray=[],this.criteriaMap=new Map,this.passwordConfirmationFormControl.setValidators(r.Validators.compose([r.Validators.required,this.matPasswordStrengthValidator.confirm(this.pass)])),this.validatorsArray.push(r.Validators.required),this.enableLengthRule&&(this.criteriaMap.set(t.Criteria.at_least_eight_chars,RegExp("^.{"+this.min+","+this.max+"}$")),this.validatorsArray.push(r.Validators.minLength(this.min)),this.validatorsArray.push(r.Validators.maxLength(this.max))),this.enableLowerCaseLetterRule&&(this.criteriaMap.set(t.Criteria.at_least_one_lower_case_char,d.lowerCase),this.validatorsArray.push(r.Validators.pattern(d.lowerCase))),this.enableUpperCaseLetterRule&&(this.criteriaMap.set(t.Criteria.at_least_one_upper_case_char,d.upperCase),this.validatorsArray.push(r.Validators.pattern(d.upperCase))),this.enableDigitRule&&(this.criteriaMap.set(t.Criteria.at_least_one_digit_char,d.digit),this.validatorsArray.push(r.Validators.pattern(d.digit))),this.enableSpecialCharRule&&(this.criteriaMap.set(t.Criteria.at_least_one_special_char,d.specialChar),this.validatorsArray.push(r.Validators.pattern(d.specialChar))),this.customValidator&&(this.criteriaMap.set(t.Criteria.at_custom_chars,this.parseCustomValidatorsRegex()),this.validatorsArray.push(r.Validators.pattern(this.parseCustomValidatorsRegex()))),this.criteriaMap.forEach((function(t,r){e.validatorsArray.push(e.matPasswordStrengthValidator.validate(r,t))})),this.passwordFormControl.setValidators(r.Validators.compose(g(this.validatorsArray))),this.Validators=r.Validators.compose(g(this.validatorsArray))},a.prototype.calculatePasswordStrength=function(){var t=[],e=100/this.criteriaMap.size;t.push(!!this.enableLengthRule&&this._containAtLeastMinChars(),!!this.enableLowerCaseLetterRule&&this._containAtLeastOneLowerCaseLetter(),!!this.enableUpperCaseLetterRule&&this._containAtLeastOneUpperCaseLetter(),!!this.enableDigitRule&&this._containAtLeastOneDigit(),!!this.enableSpecialCharRule&&this._containAtLeastOneSpecialChar(),!!this.customValidator&&this._containCustomChars()),this._strength=t.filter((function(t){return t})).length*e,this.propagateChange(this.strength),this.onStrengthChanged.emit(this.strength),this.setRulesAndValidators()},a.prototype.reset=function(){this._strength=0,this.containAtLeastMinChars=this.containAtLeastOneLowerCaseLetter=this.containAtLeastOneUpperCaseLetter=this.containAtLeastOneDigit=this.containAtCustomChars=this.containAtLeastOneSpecialChar=!1},a.prototype.writeValue=function(t){t&&(this._strength=t)},a.prototype.registerOnChange=function(t){this.propagateChange=t},a.prototype.registerOnTouched=function(t){},a.prototype.setDisabledState=function(t){},a.prototype._containAtLeastMinChars=function(){return this.containAtLeastMinChars=this.pass.length>=this.min,this.containAtLeastMinChars},a.prototype._containAtLeastOneLowerCaseLetter=function(){return this.containAtLeastOneLowerCaseLetter=this.criteriaMap.get(t.Criteria.at_least_one_lower_case_char).test(this.pass),this.containAtLeastOneLowerCaseLetter},a.prototype._containAtLeastOneUpperCaseLetter=function(){return this.containAtLeastOneUpperCaseLetter=this.criteriaMap.get(t.Criteria.at_least_one_upper_case_char).test(this.pass),this.containAtLeastOneUpperCaseLetter},a.prototype._containAtLeastOneDigit=function(){return this.containAtLeastOneDigit=this.criteriaMap.get(t.Criteria.at_least_one_digit_char).test(this.pass),this.containAtLeastOneDigit},a.prototype._containAtLeastOneSpecialChar=function(){return this.containAtLeastOneSpecialChar=this.criteriaMap.get(t.Criteria.at_least_one_special_char).test(this.pass),this.containAtLeastOneSpecialChar},a.prototype._containCustomChars=function(){return this.containAtCustomChars=this.criteriaMap.get(t.Criteria.at_custom_chars).test(this.pass),this.containAtCustomChars},a.prototype.ngAfterContentChecked=function(){this.pass&&this.calculatePasswordStrength()},a}();function C(t,e,r){var n={timing:t,delay:0,rotateX:e,rotateY:r};return a.animation([a.style({"backface-visibility":"visible"}),a.animate("{{ timing }}s {{ delay }}s ease-in",a.keyframes([a.style({opacity:0,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 90deg)",offset:0}),a.style({opacity:1,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -20deg)",offset:.4}),a.style({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 10deg)",offset:.6}),a.style({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -5deg)",offset:.8}),a.style({transform:"perspective(400px) rotate3d(0, 0, 0, 0)",offset:1})]))],{params:n})}f.decorators=[{type:e.Component,args:[{selector:"mat-password-strength",exportAs:"matPasswordStrength",template:'<mat-progress-bar [color]="color"\r\n                  [value]="strength"\r\n                  mode="determinate">\r\n</mat-progress-bar>\r\n',changeDetection:e.ChangeDetectionStrategy.OnPush,providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:e.forwardRef((function(){return f})),multi:!0}],styles:[".green :host::ng-deep .mat-progress-bar.mat-primary .mat-progress-bar-fill:after{background-color:#43a047}"]}]}],f.propDecorators={pass:[{type:e.Input}],externalError:[{type:e.Input}],enableLengthRule:[{type:e.Input}],enableLowerCaseLetterRule:[{type:e.Input}],enableUpperCaseLetterRule:[{type:e.Input}],enableDigitRule:[{type:e.Input}],enableSpecialCharRule:[{type:e.Input}],min:[{type:e.Input}],max:[{type:e.Input}],customValidator:[{type:e.Input}],warnThreshold:[{type:e.Input}],accentThreshold:[{type:e.Input}],onStrengthChanged:[{type:e.Output}]};var y=C(1,1,0),v=C(1,0,1),_=a.animation(a.animate("{{ timing }}s {{ delay }}s",a.keyframes([a.style({transform:"translate3d(0, 0, 0)",offset:0}),a.style({transform:"translate3d(-10px, 0, 0)",offset:.1}),a.style({transform:"translate3d(10px, 0, 0)",offset:.2}),a.style({transform:"translate3d(-10px, 0, 0)",offset:.3}),a.style({transform:"translate3d(10px, 0, 0)",offset:.4}),a.style({transform:"translate3d(-10px, 0, 0)",offset:.5}),a.style({transform:"translate3d(10px, 0, 0)",offset:.6}),a.style({transform:"translate3d(-10px, 0, 0)",offset:.7}),a.style({transform:"translate3d(10px, 0, 0)",offset:.8}),a.style({transform:"translate3d(-10px, 0, 0)",offset:.9}),a.style({transform:"translate3d(0, 0, 0)",offset:1})])),{params:{timing:1,delay:0}}),b=function(){function t(){this.enableScoreInfo=!1,this.lowerCaseCriteriaMsg="contains at least one lower character",this.upperCaseCriteriaMsg="contains at least one upper character",this.digitsCriteriaMsg="contains at least one digit character",this.specialCharsCriteriaMsg="contains at least one special character",this.customCharsCriteriaMsg="contains at least one custom character",this.matIconDone="done",this.matIconError="error"}return t.prototype.ngOnInit=function(){this.minCharsCriteriaMsg||(this.minCharsCriteriaMsg="contains at least "+this.passComponent.min+" characters")},t}();b.decorators=[{type:e.Component,args:[{selector:"mat-password-strength-info",exportAs:"matPasswordStrengthInfo",template:'<mat-card @list>\r\n  <mat-card-content>\r\n    <div *ngIf="passComponent.enableLowerCaseLetterRule" @items class="info-row">\r\n      <div *ngIf="passComponent.containAtLeastOneLowerCaseLetter; then done else error" @flipY>\r\n      </div>\r\n      <ng-template #done>\r\n        <mat-icon @positiveState color="primary">{{matIconDone}}</mat-icon>\r\n      </ng-template>\r\n      <ng-template #error>\r\n        <mat-icon @negativeState color="warn">{{matIconError}}</mat-icon>\r\n      </ng-template>\r\n      <span>{{lowerCaseCriteriaMsg}}</span>\r\n    </div>\r\n\r\n    <div *ngIf="passComponent.enableUpperCaseLetterRule" @items class="info-row">\r\n      <div *ngIf="passComponent.containAtLeastOneUpperCaseLetter; then done else error">\r\n      </div>\r\n      <ng-template #done>\r\n        <mat-icon @positiveState color="primary">{{matIconDone}}</mat-icon>\r\n      </ng-template>\r\n      <ng-template #error>\r\n        <mat-icon @negativeState color="warn">{{matIconError}}</mat-icon>\r\n      </ng-template>\r\n      <span>{{upperCaseCriteriaMsg}}</span>\r\n    </div>\r\n\r\n    <div *ngIf="passComponent.enableDigitRule" @items class="info-row">\r\n      <div *ngIf="passComponent.containAtLeastOneDigit; then done else error">\r\n      </div>\r\n      <ng-template #done>\r\n        <mat-icon @positiveState color="primary">{{matIconDone}}</mat-icon>\r\n      </ng-template>\r\n      <ng-template #error>\r\n        <mat-icon @negativeState color="warn">{{matIconError}}</mat-icon>\r\n      </ng-template>\r\n      <span>{{digitsCriteriaMsg}}</span>\r\n    </div>\r\n\r\n    <div *ngIf="passComponent.enableSpecialCharRule" @items class="info-row">\r\n      <div *ngIf="passComponent.containAtLeastOneSpecialChar; then done else error">\r\n      </div>\r\n      <ng-template #done>\r\n        <mat-icon @positiveState color="primary">{{matIconDone}}</mat-icon>\r\n      </ng-template>\r\n      <ng-template #error>\r\n        <mat-icon @negativeState color="warn">{{matIconError}}</mat-icon>\r\n      </ng-template>\r\n      <span>{{specialCharsCriteriaMsg}}</span>\r\n    </div>\r\n\r\n    <div *ngIf="passComponent.enableLengthRule" @items class="info-row">\r\n      <div *ngIf="passComponent.containAtLeastMinChars; then done else error">\r\n      </div>\r\n      <ng-template #done>\r\n        <mat-icon @positiveState color="primary">{{matIconDone}}</mat-icon>\r\n      </ng-template>\r\n      <ng-template #error>\r\n        <mat-icon @negativeState color="warn">{{matIconError}}</mat-icon>\r\n      </ng-template>\r\n      <span>{{minCharsCriteriaMsg}}</span>\r\n    </div>\r\n\r\n    <div *ngIf="passComponent.customValidator" @items class="info-row">\r\n      <div *ngIf="passComponent.containAtCustomChars; then done else error">\r\n      </div>\r\n      <ng-template #done>\r\n        <mat-icon @positiveState color="primary">{{matIconDone}}</mat-icon>\r\n      </ng-template>\r\n      <ng-template #error>\r\n        <mat-icon @negativeState color="warn">{{matIconError}}</mat-icon>\r\n      </ng-template>\r\n      <span>{{customCharsCriteriaMsg}}</span>\r\n    </div>\r\n\r\n    <div *ngIf="enableScoreInfo" @items class="info-row">\r\n      <div *ngIf="passComponent.strength === 100; then done else error">\r\n      </div>\r\n      <ng-template #done>\r\n        <mat-icon @positiveState color="primary">{{matIconDone}}</mat-icon>\r\n      </ng-template>\r\n      <ng-template #error>\r\n        <mat-icon @negativeState color="warn">{{matIconError}}</mat-icon>\r\n      </ng-template>\r\n      <span>Password\'s strength = {{passComponent.strength}} %100</span>\r\n    </div>\r\n\r\n  </mat-card-content>\r\n</mat-card>',animations:[a.trigger("list",[a.transition(":enter",[a.query("@items",a.stagger(300,a.animateChild()))])]),a.trigger("items",[a.transition(":enter",[a.style({transform:"scale(0.5)",opacity:0}),a.animate("1s cubic-bezier(.8,-0.6,0.2,1.5)",a.style({transform:"scale(1)",opacity:1}))]),a.transition(":leave",[a.style({transform:"scale(1)",opacity:1,height:"*"}),a.animate("1s cubic-bezier(.8,-0.6,0.2,1.5)",a.style({transform:"scale(0.5)",opacity:0,height:"0px",margin:"0px"}))])]),a.trigger("positiveState",[a.transition(":enter",[a.style({"backface-visibility":"visible"}),a.animate("{{ timing }}s {{ delay }}s ease-in",a.keyframes([a.style({opacity:0,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 90deg)",offset:0}),a.style({opacity:1,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -20deg)",offset:.4}),a.style({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 10deg)",offset:.6}),a.style({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -5deg)",offset:.8}),a.style({transform:"perspective(400px) rotate3d(0, 0, 0, 0)",offset:1})]))],{params:{timing:1,delay:0,rotateX:1,rotateY:0}})]),a.trigger("negativeState",[a.transition(":enter",a.useAnimation(_))])],styles:["mat-card{flex:1 1 0;flex-direction:row;place-content:stretch center}mat-card,mat-card mat-card-content{align-items:stretch;box-sizing:border-box;display:flex}mat-card mat-card-content{flex-direction:column;max-width:100%;place-content:stretch flex-start}mat-card mat-card-content mat-icon{margin-right:10px}mat-card mat-card-content .info-row{align-items:center;box-sizing:border-box;display:flex;flex-direction:row}"]}]}],b.propDecorators={passComponent:[{type:e.Input}],enableScoreInfo:[{type:e.Input}],lowerCaseCriteriaMsg:[{type:e.Input}],upperCaseCriteriaMsg:[{type:e.Input}],digitsCriteriaMsg:[{type:e.Input}],specialCharsCriteriaMsg:[{type:e.Input}],customCharsCriteriaMsg:[{type:e.Input}],minCharsCriteriaMsg:[{type:e.Input}],matIconDone:[{type:e.Input}],matIconError:[{type:e.Input}]};var w=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[]}},t}();w.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule,s.MatProgressBarModule,o.MatCardModule,p.MatIconModule,i.MatRippleModule],exports:[f,b,h],declarations:[f,b,h],entryComponents:[h]}]}],t.MatPassToggleVisibilityComponent=h,t.MatPasswordStrengthComponent=f,t.MatPasswordStrengthInfoComponent=b,t.MatPasswordStrengthModule=w,t.MatPasswordStrengthValidator=u,t.RegExpValidator=d,t.flipIn=C,t.flipInX=y,t.flipInY=v,t.shake=_,t.ɵa=_,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-material-extensions-password-strength.umd.min.js.map